{{define "sidebar"}}
<aside 
  x-data="{ open: false }"
  x-init="open = window.innerWidth >= 768"
  x-cloak
  @toggle-sidebar.window="open = !open"
  @resize.window="open = window.innerWidth >= 768"
>
  <!-- Overlay mobile -->
  <div 
    x-show="open && window.innerWidth < 768"
    x-transition.opacity
    @click="open = false"
    class="fixed inset-0 bg-black/40 z-40"
  ></div>

  <!-- Sidebar utama -->
  <nav 
    class="fixed md:sticky top-0 md:top-5 left-0 
           h-screen md:h-[calc(100vh-2rem)] md:my-5
           w-64 bg-white shadow-2xl md:shadow-lg 
           rounded-none md:rounded-3xl 
           p-5 space-y-4 z-50 transform transition-transform duration-300 ease-in-out 
           overflow-y-auto"
    :class="open ? 'translate-x-0' : '-translate-x-full md:translate-x-0'"
  >
    <div class="flex justify-between items-center mb-8">
      <div class="flex items-center">
        <div class="bg-indigo-600 text-white w-10 h-10 flex items-center justify-center rounded-xl font-bold text-xl">T</div>
        <h2 class="ml-3 text-lg font-semibold text-gray-700">Task Manager</h2>
      </div>
      <!-- Tombol close di mobile -->
      <button 
        @click="open = false" 
        class="md:hidden text-gray-600 text-2xl hover:text-gray-800 transition"
      >
        <i class="fas fa-times"></i>
      </button>
    </div>

    <ul class="space-y-2 pb-6">
      <!-- Dashboard -->
      <li>
        <a href="{{.DashboardURL}}" 
          class="flex items-center py-2 px-4 rounded-lg transition
          {{if eq .CurrentPath "/dashboard"}}bg-indigo-500 text-white font-semibold
          {{else}}text-gray-700 hover:bg-indigo-50 hover:text-indigo-600{{end}}">
          <i class="fas fa-home mr-3"></i> Dashboard
        </a>
      </li>

      <!-- Users -->
      <li>
        <a href="{{.UsersURL}}"
          class="flex items-center py-2 px-4 rounded-lg transition
          {{if hasPrefix .CurrentPath "/users"}}bg-indigo-500 text-white font-semibold
          {{else}}text-gray-700 hover:bg-indigo-50 hover:text-indigo-600{{end}}">
          <i class="fas fa-users mr-3"></i> Users
        </a>
      </li>


      <!-- Tasks -->
      <li>
        <a href="{{.TasksURL}}"
           class="flex items-center py-2 px-4 rounded-lg transition
           {{if hasPrefix .CurrentPath "/tasks"}}bg-indigo-500 text-white font-semibold
           {{else}}text-gray-700 hover:bg-indigo-50 hover:text-indigo-600{{end}}">
          <i class="fas fa-tasks mr-3"></i> Tasks
        </a>
      </li>

      <!-- Reports -->
      <li>
        <a href="/reports"
           class="flex items-center py-2 px-4 rounded-lg transition
           {{if eq .CurrentPath "/reports"}}bg-indigo-500 text-white font-semibold
           {{else}}text-gray-700 hover:bg-indigo-50 hover:text-indigo-600{{end}}">
          <i class="fas fa-chart-bar mr-3"></i> Reports
        </a>
      </li>

      <!-- Settings -->
      <li>
        <a href="/settings"
           class="flex items-center py-2 px-4 rounded-lg transition
           {{if eq .CurrentPath "/settings"}}bg-indigo-500 text-white font-semibold
           {{else}}text-gray-700 hover:bg-indigo-50 hover:text-indigo-600{{end}}">
          <i class="fas fa-cog mr-3"></i> Settings
        </a>
      </li>

      <hr class="border-gray-200 my-4">

      <li>
        <a href="#" class="flex items-center py-2 px-4 rounded-lg text-red-500 hover:bg-red-50 transition">
          <i class="fas fa-sign-out-alt mr-3"></i> Logout
        </a>
      </li>
    </ul>
    <span class="absolute bottom-4 pl-3 text-blue-400 text-xs">
      Running on {{goversion}}
    </span>
  </nav>

  <!-- CSS scrollbar langsung di sini -->
  <style>
    nav::-webkit-scrollbar {
      width: 6px; /* Lebar scrollbar */
    }

    nav::-webkit-scrollbar-track {
      background: transparent; /* Track transparan */
    }

    nav::-webkit-scrollbar-thumb {
      background-color: rgba(0,0,0,0.3); /* Warna scrollbar */
      border-radius: 3px; /* Biar rounded */
    }

    nav::-webkit-scrollbar-thumb:hover {
      background-color: rgba(62, 56, 56, 0.5);
    }

    /* Untuk Firefox */
    nav {
      scrollbar-width: thin;
      scrollbar-color: rgba(67, 64, 64, 0.3) transparent;
    }
  </style>
</aside>
{{end}}
